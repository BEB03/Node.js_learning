# HTTP 서버 구축

http는 노드의 **내장 모듈**이다. 즉 따로 설치할 필요 없음. (1장의 웹 서버가 내장되어 있다는 게 이 말이었구나)
노드 실행 후 http라고 쳐서 정보를 확인해 볼 수 있었음.

```js
const http = require("http");
```

따라서 이렇게 시작하게 된다.

## 포트

서버 내에서 프로세스를 구분하는 번호.

- 이미 사용하고 있는 포트를 사용할 경우 에러 발생!
- 맥에서는 1024번 이하 포트 연결시 sudo를 붙여야함
- 80(http), 443(https), 3306(mysql)등 주로 쓰는 포트번호 들이 있음

### 기본 예시

```js
const http = require("http"); // http 모듈 불러오기
const port = 8080; // 포트 번호 설정

const server = http.createServer((req, res) => {
  // 서버를 만드는 http모듈의 메소드
  res.writeHead(200, { "Content-Type": "text/html; charset=utf-8" }); // 이 정보는 헤더에 저장
  res.write("hello stranger!"); // 이 정보는 바디에 저장
  res.end("response closed");
});

server.listen(port);

server.on("listening", () => {
  console.log("서버 대기중");
});

server.on("error", (error) => {
  console.error(error);
});
```

- [x] .on의 listening 이벤트에 대한 내용이 없다? : 해결 이게 다른 모듈 net에서 가져온 거라 거기서 설명하고 있었음
- [ ] 그럼 net 모듈은 뭐지?

## http 상태 코드

브라우저가 서버 요청이 어떻게 처리되었는지를 알려주기 위해 헤더에 넣는 코드.

- 2xx : 성공을 알림
- 3xx : 리디렉션
- 4xx : 요청에 오류가 있음
- 5xx : 요청은 잘 되었지만 서버에 오류가 있을 때. (이게 뜨지 않게 프로그래밍 하자!)

무조건 응답을 보내야 한다. (에러가 발생하더라도!)

## http 메소드

- GET : 서버 리소스를 가져옴
- POST : 새로운 리소스 생성
- PUT : 리소스 치환 (일부 수정이 아닌 요청 바디로 교체하는 것이기 때문에 리소스 전체에 대한 내용을 보내야 함)
- PATCH : 리소스 수정 (요청에 수정할 부분만 넣어서 보내면 됨)
- DELETE : 리소스 삭제
- OPTIONS : 통신 옵션 설명

## REST

로이 필딩의 논문에서 소개되었고, http를 효율적으로 사용할 수 있는 구조를 제시한 것이고, 현대 웹에서 다들 이 가이드라인을 따르고 있기 때문에 잘 지켜야 하고, 어떻게 서버 리소스를 잘 표현할지에 대한 가이드라인이고...
뭔가 시원한 설명을 찾기가 어렵다 🤨

어쨋든 중요한 **설계 원칙**

- URI는 리소스를 표현하는데 집중한다. (명사로)
- 행위는 http 메서드로만 표현한다.

예컨대 유저 정보를 가져오고 싶다.

```text
GET /information/1 //
GET /getuser/1 //



```

이렇게 써야 아 어느 리소스에 어떤 행위를 하라는 요청이구나를 쉽게 알 수 있다.

- [ ] REST의 6가지 원칙에 대해서 공부하기
- [ ] 프로젝트 2 리팩토링 : URI에 행위를 명시한 부분이 있었다. 이를 수정할 것

## 라우팅 예제

주소 체계를 만들었으면 실제로 그렇게 분기가 되게 서버를 구축해야 한다.

## 쿠키와 세션

- [ ] 별도 파일로 제작하기

## https, http2

https 모듈은 ssl 암호화가 추가된다. 이는 get,post 요청 시 오가는 데이터를 암호화해서 요청을 가로채도 내용을 알 수 없게 만든다.

아까 보았던 ssl 암호화에 http/2 프로토콜까지 사용할 수 있는 모듈이 http2 이다.

- [ ] http/1.1 과 http/2의 차이점 공부하기

## cluster
